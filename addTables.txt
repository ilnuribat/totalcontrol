CREATE DATABASE totalcontrol CHARACTER SET utf8 COLLATE utf8_unicode_ci;
USE totalcontrol;

CREATE TABLE class(
id INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
name TEXT);

CREATE TABLE students(
id INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
name_surname VARCHAR(30) CHARACTER SET utf8 COLLATE utf8_unicode_ci,
class INTEGER,
room INTEGER,
FOREIGN KEY (class) REFERENCES class(id)
) CHARACTER SET utf8 COLLATE utf8_unicode_ci;

CREATE TABLE control (
id INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
zrd INTEGER,
chku INTEGER,
opozdal INTEGER,
vnesh_vid INTEGER,
sampod INTEGER,
ch_terr INTEGER,
chkv INTEGER,
day INTEGER NOT NULL,
id_student INTEGER,
UNIQUE KEY studentDay(id_student, day),
FOREIGN KEY(id_student) REFERENCES students(id)
);

INSERT INTO class(name) VALUES
	('7А'),
	('7Б'),
	('7В'),
	('8А'),
	('8Б'),
	('8В'),
	('9А'),
	('9Б'),
	('9В'),
	('10А'),
	('10Б'),
	('10В'),
	('11А'),
	('11Б'),
	('11В');

